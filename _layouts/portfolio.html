---
layout: base 
---

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to My Photography Portfolio</title>
    <!-- 预加载关键资源 -->
    <link rel="preload" href="{{ '/assets/img/Genoa-me.jpg' | relative_url }}" as="image">
    <style>
        body {
            font-family: 'Libre Baskerville', 'Times New Roman', Times, serif;
            margin: 0;
            padding: 0;
            background-color: #fff; /* 改为白色背景 */
            font-weight: normal;
            line-height: 1.6;
        }

        h1 {
            text-align: center;
            color: #333;
            font-weight: normal;
            margin: 1rem 0 2rem;
            font-size: 2rem;
        }

        /* 优化个人介绍和照片排版 */
        #self-introduction {
            margin: 20px auto 30px;
            padding: 30px;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 30px;
            width: 100%;
            max-width: none;
        }

        .self-photo {
            width: 300px; /* 增大照片尺寸 */
            height: auto;
            object-fit: cover;
            border: 3px solid #f0f0f0;
            border-radius: 12px;
            box-shadow: none;
        }

        #self-introduction-content {
            flex: 1;
        }

        #self-introduction h2 {
            margin-top: 0;
            text-align: left;
            font-weight: bold;
            color: #333;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            font-size: 1.8rem;
        }

        #self-introduction-content p {
            margin-top: 0;
            line-height: 1.7;
            color: #555;
            font-size: 1.1rem;
        }

        /* 分类导航栏 */
        .category-nav {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px auto;
            width: 100%;
            max-width: none;
            padding: 0 20px;
        }

        .category-btn {
            padding: 12px 25px;
            background-color: #f8f8f8;
            color: #555;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: none;
        }

        .category-btn:hover {
            background-color: #e9e9e9;
            transform: translateY(-2px);
        }

        .category-btn.active {
            background-color: #2a7ce0;
            color: white;
            box-shadow: none;
        }

        /* 照片分类容器 */
        .category {
            margin: 20px auto;
            padding: 0 20px;
            width: 100%;
            max-width: none;
            display: none;
        }

        .category.active {
            display: block;
        }

        .category-title {
            color: #333;
            font-weight: bold;
            margin: 0 0 20px;
            text-align: center;
            font-size: 1.6rem;
            position: relative;
        }

        .category-title::after {
            content: '';
            display: block;
            width: 60px;
            height: 3px;
            background-color: #2a7ce0;
            margin: 10px auto 0;
            border-radius: 2px;
        }

        .gallery {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            padding: 15px 0;
        }

        .gallery img {
            height: 250px; /* 增大照片高度 */
            width: auto;
            object-fit: cover;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: none;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            background-color: #f0f0f0;
            opacity: 0;
        }

        .gallery img.loaded {
            opacity: 1;
        }

        .gallery img:hover {
            transform: translateY(-8px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        #photo-details {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.4);
            z-index: 1000;
            width: 100%;
            max-width: 95%;
            max-height: 95%;
            overflow-y: auto;
        }

        #photo-details img {
            max-width: 100%;
            height: auto;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        #photo-details h2 {
            margin-top: 0;
            color: #333;
            border-bottom: none;
            padding-bottom: 0;
            font-size: 1.6rem;
        }

        #photo-details p {
            margin: 10px 0;
            color: #555;
            font-size: 1.1rem;
        }

        #photo-details strong {
            color: #333;
        }

        #overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 999;
        }

        #close-details {
            display: block;
            margin: 20px auto 0;
            padding: 10px 25px;
            background-color: #2a7ce0;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: background-color 0.3s ease;
        }

        #close-details:hover {
            background-color: #1a5d9e;
        }

        /* 加载指示器 */
        .loading-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 220px;
            width: 220px;
            background-color: #f0f0f0;
            border-radius: 8px;
            margin: 5px;
        }

        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #2a7ce0;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            #self-introduction {
                flex-direction: column;
                text-align: center;
                padding: 20px;
            }
            
            .self-photo {
                width: 200px; /* 移动端适当减小照片尺寸 */
            }
            
            .category-nav {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }
            
            .category-btn {
                width: 80%;
            }
            
            .gallery img {
                height: 180px; /* 移动端适当减小照片尺寸 */
                width: 180px;
            }
        }
        
        /* 性能优化：启用硬件加速 */
        .gallery img {
            transform: translateZ(0);
            backface-visibility: hidden;
        }
    </style>
</head>

<body>
    <h1>Welcome to My Photography Portfolio</h1>
    
    <!-- 优化的个人介绍和照片排版 -->
    <div id="self-introduction">
        <div id="self-introduction-content">
            <h2>About Me</h2>
            <p>
                Hi, here is Xin Jin (金 鑫), a photography enthusiast.
                I enjoy shooting landscape scenery, especially astrophotography.
                I like looking up at the stars and the Milky Way at night, and I also love capturing meteor showers!
                I once led my friends to chase the "Perseid Meteor Shower".
                We lay on the road and watched the meteors streaking across the sky one by one.
                That feeling was truly wonderful! I also do some film photography.
                I'm fond of that natural touch, where there is no algorithm to process the images, just completely natural and unalterable moments.
                I've also tried portrait photography.  
            </p>
        </div>
        <img class="self-photo" src="{{ '/assets/img/Genoa-me.jpg' | relative_url }}" alt="My Photo">
    </div>
    
    <!-- 分类导航栏 -->
    <div class="category-nav">
        <button class="category-btn active" data-category="landscape">Landscape Photography</button>
        <button class="category-btn" data-category="portrait">Portrait Photography</button>
        <button class="category-btn" data-category="film">Film Photography</button>
    </div>
    
    <!-- Landscape Photography -->
    <div class="category active" id="landscape-category">
        <h2 class="category-title">Landscape Photography</h2>
        <div class="gallery">
            <img data-src="{{ '/assets/photos/landscape/Star/Star_Trails_1.jpg' | relative_url }}"
                data-title="重庆工商大学-启智楼-星轨" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 15-30 f/2.8" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/landscape/Star/Star_Trails_2.jpg' | relative_url }}"
                data-title="派斯学院-S教学楼-星轨" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 15-30 f/2.8" data-location="重庆-合川(Chongqing, Hechuan)">
            <img data-src="{{ '/assets/photos/landscape/Star/Star_Trails_3.jpg' | relative_url }}"
                data-title="派斯学院-新行政楼-星轨" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 15-30 f/2.8" data-location="重庆-合川(Chongqing, Hechuan)">
            <img data-src="{{ '/assets/photos/landscape/Star/Perseid_Meteor_Shower.jpg' | relative_url }}"
                data-title="四面山-英仙座流星雨" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 15-30 f/2.8" data-location="重庆-南川(Chongqing, Nachuan)">
            <img data-src="{{ '/assets/photos/landscape/Star/MilkyWay_1.jpg' | relative_url }}"
                data-title="綦江花坝-银河拱桥" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 15-30 f/2.8" data-location="重庆-綦江(Chongqing, Qijiang)">
            <img data-src="{{ '/assets/photos/landscape/Star/MilkyWay_2.png' | relative_url }}"
                data-title="高沟-银河-合照" data-content="None" data-camera="Sony-A7M3" 
                data-lens="Tamron 24-70 f/2.8" data-location="安徽-无为(Anhui, Wuwei)">
            <img data-src="{{ '/assets/photos/landscape/CTBU.jpg' | relative_url }}"
                data-title="重庆工商大学-南区" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/landscape/CTBU_Library_Sundown.jpg' | relative_url }}"
                data-title="重庆工商大学-图书馆" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/landscape/CTBU_Library_Night.jpg' | relative_url }}"
                data-title="重庆工商大学-图书馆" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/landscape/CTBU_Golden_Hour.jpg' | relative_url }}"
                data-title="重庆工商大学-金色时刻" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 15-30mm f/2.8" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/landscape/CTBU_Blues_Moment.jpg' | relative_url }}"
                data-title="重庆工商大学-蓝调时刻" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 15-30mm f/2.8" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/landscape/BirchTree_Rainy.jpg' | relative_url }}"
                data-title="雨天白桦树" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 15-30mm f/2.8" data-location="安徽-无为(Anhui, Wuwei)">
            <img data-src="{{ '/assets/photos/landscape/Fengchui_Ridge.png' | relative_url }}"
                data-title="风吹岭" data-content="None" data-camera="Sony-A7M3" 
                data-lens="Tamron 24-70 f/2.8" data-location="重庆-南川(Chongqing, Nachuan)">
            <img data-src="{{ '/assets/photos/landscape/Haitangxi.jpg' | relative_url }}"
                data-title="海棠溪" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/landscape/Lianhua_Peak.jpg' | relative_url }}"
                data-title="莲花峰" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 15-30mm f/2.8" data-location="安徽-黄山自然风景区(Anhui, Yellow Mountain)">
            <img data-src="{{ '/assets/photos/landscape/Longji_Mountain.jpg' | relative_url }}"
                data-title="龙脊山-小屋" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/landscape/Longji_Mountain_2.jpg' | relative_url }}"
                data-title="龙脊山-小屋" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/landscape/Lunar_Eclipse.jpg' | relative_url }}"
                data-title="月食" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/landscape/Nanhu_Sundown.jpg' | relative_url }}"
                data-title="高沟南湖-日落" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="安徽-无为(Anhui, Wuwei)">
            <img data-src="{{ '/assets/photos/landscape/Sangong_Mountain_Sunrise.jpg' | relative_url }}"
                data-title="无为三公山-日出" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 15-30mm f/2.8" data-location="安徽-无为(Anhui, Wuwei)">
            <img data-src="{{ '/assets/photos/landscape/Wenfeng_Street.jpg' | relative_url }}"
                data-title="合川-文峰古街" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-合川(Chongqing, Hechuan)">
            <img data-src="{{ '/assets/photos/landscape/Pass_3.jpg' | relative_url }}"
                data-title="派斯学院-3教" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 15-30mm f/2.8" data-location="重庆-合川(Chongqing, Hechuan)">
            <img data-src="{{ '/assets/photos/landscape/Puyan_Temple.jpg' | relative_url }}"
                data-title="合川-濮岩寺 (4年一次没去)" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 15-30mm f/2.8" data-location="重庆-合川(Chongqing, Hechuan)">
            <img data-src="{{ '/assets/photos/landscape/Cadillac_1.jpg' | relative_url }}"
                data-title="凯迪拉克" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 15-30mm f/2.8" data-location="重庆-合川(Chongqing, Hechuan)">
            <img data-src="{{ '/assets/photos/landscape/Cadillac_2.jpg' | relative_url }}"
                data-title="凯迪拉克" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 15-30mm f/2.8" data-location="重庆-合川(Chongqing, Hechuan)">
        </div>
    </div>
    
    <!-- Portrait Photography -->
    <div class="category" id="portrait-category">
        <h2 class="category-title">Portrait Photography</h2>
        <div class="gallery">
            <img data-src="{{ '/assets/photos/portrait/Yuanyuan.jpg' | relative_url }}"
                data-title="小榨菜" data-content="None" data-camera="Canon EOS M50" 
                data-lens="Cannon 18-55mm f/3.5-5.6" data-location="山东-青岛(Shandong, Qingdap)">
            <img data-src="{{ '/assets/photos/portrait/Jing.png' | relative_url }}"
                data-title="静静子" data-content="None" data-camera="Sony-A7M3" 
                data-lens="Tamron 24-70 f/2.8" data-location="重庆-渝中(Chongqing, Yuzhong)">
            <img data-src="{{ '/assets/photos/portrait/Qian.jpg' | relative_url }}"
                data-title="毛同学" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-合川(Chongqing, Hechuan)">
            <img data-src="{{ '/assets/photos/portrait/Binjiang_Xin.jpg' | relative_url }}"
                data-title="重庆滨江公园（抖音没火之前）" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-渝中(Chongqing, Yuzhong)">
            <img data-src="{{ '/assets/photos/portrait/2329.jpg' | relative_url }}"
                data-title="浩伟学长和陈超学长" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/portrait/2448.jpg' | relative_url }}"
                data-title="浩伟学长和陈超学长" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/portrait/2476.jpg' | relative_url }}"
                data-title="浩伟学长和陈超学长-背影" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/portrait/2537.jpg' | relative_url }}"
                data-title="学长和老师们" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/portrait/sportsground_friends.jpg' | relative_url }}"
                data-title="操场-同学们（可爱）" data-content="None" data-camera="Nikon-D610" 
                data-lens="Tamron 70-300mm f/4-5.6" data-location="重庆-南岸(Chongqing, Nanan)">
        </div>
    </div>
    
    <!-- Film Photography -->
    <div class="category" id="film-category">
        <h2 class="category-title">Film Photography</h2>
        <div class="gallery">
            <img data-src="{{ '/assets/photos/film/1.2.jpg' | relative_url }}"
                data-title="派斯女神像" data-content="None" data-camera="NikonMat" 
                data-lens="Nikon 135mm f/2" data-location="重庆-合川(Chongqing, Hechuan)">
            <img data-src="{{ '/assets/photos/film/1.5.jpg' | relative_url }}"
                data-title="国立二中-石狮子" data-content="None" data-camera="NikonMat" 
                data-lens="Nikon 135mm f/2" data-location="重庆-合川(Chongqing, Hechuan)">
            <img data-src="{{ '/assets/photos/film/2.jpg' | relative_url }}"
                data-title="小咪咪" data-content="None" data-camera="NikonMat" 
                data-lens="Nikon 35mm f/2.8" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/film/XinJin.jpg' | relative_url }}"
                data-title="自己" data-content="None" data-camera="NikonMat" 
                data-lens="Nikon 35mm f/2.8" data-location="四川-峨眉山(Sichuan, Emeishan)">
            <img data-src="{{ '/assets/photos/film/Friends.jpg' | relative_url }}"
                data-title="朋友们" data-content="None" data-camera="NikonMat" 
                data-lens="Nikon 35mm f/2.8" data-location="四川-乐山(Sichuan, Leshan)">
            <img data-src="{{ '/assets/photos/film/000026450001.jpg' | relative_url }}"
                data-title="重庆工商大学-启智楼" data-content="None" data-camera="海鸥4-A" 
                data-lens="天赛" data-location="重庆-南岸(Chongqing, Nanan)">
            <img data-src="{{ '/assets/photos/film/000026160011.jpg' | relative_url }}"
                data-title="天柱山-祈愿牌" data-content="None" data-camera="NikonMat" 
                data-lens="Nikon 17-35mm f/3.5" data-location="安徽-安庆(Anhui, Anqing)">
            <img data-src="{{ '/assets/photos/film/000026160035.jpg' | relative_url }}"
                data-title="石雕-猴" data-content="None" data-camera="NikonMat" 
                data-lens="Nikon 35mm f/2.8" data-location="四川-峨眉山(Sichuan, Emeishan)">
        </div>
    </div>
    
    <div id="photo-details">
        <img id="photo-image" src="" alt="Details">
        <h2 id="photo-title"></h2>
        <p id="photo-content"></p>
        <p><strong>Camera:</strong> <span id="photo-camera"></span></p>
        <p><strong>Lens:</strong> <span id="photo-lens"></span></p>
        <p><strong>Location:</strong> <span id="photo-location"></span></p>
        <button id="close-details">Close</button>
    </div>
    <div id="overlay"></div>
    
    <script>
        // 图片懒加载和预加载系统
        class ImageLoader {
            constructor() {
                this.imageCache = new Map();
                this.loadingQueue = [];
                this.maxConcurrentLoads = 3;
                this.currentLoads = 0;
            }

            // 预加载关键图片
            preloadCriticalImages() {
                // 预加载前几张图片
                const criticalImages = document.querySelectorAll('#landscape-category .gallery img');
                const firstImages = Array.from(criticalImages).slice(0, 6);
                
                firstImages.forEach(img => {
                    this.preloadImage(img.dataset.src);
                });
            }

            // 预加载单个图片
            preloadImage(src) {
                if (this.imageCache.has(src)) return;
                
                const img = new Image();
                img.src = src;
                this.imageCache.set(src, img);
            }

            // 懒加载图片
            lazyLoadImages(categoryId) {
                const categoryElement = document.getElementById(categoryId);
                if (!categoryElement) return;
                
                const images = categoryElement.querySelectorAll('.gallery img[data-src]:not(.loaded)');
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            this.loadImage(img);
                            observer.unobserve(img);
                        }
                    });
                }, {
                    rootMargin: '50px' // 提前50px开始加载
                });

                images.forEach(image => {
                    imageObserver.observe(image);
                });
            }

            // 加载单个图片
            loadImage(imgElement) {
                const src = imgElement.dataset.src;
                
                // 如果已在缓存中，直接使用
                if (this.imageCache.has(src)) {
                    const cachedImg = this.imageCache.get(src);
                    if (cachedImg.complete) {
                        imgElement.src = src;
                        imgElement.classList.add('loaded');
                        return;
                    }
                }
                
                // 设置加载状态
                imgElement.classList.add('loading');
                
                // 创建新的图片对象进行加载
                const img = new Image();
                img.onload = () => {
                    imgElement.src = src;
                    imgElement.classList.remove('loading');
                    imgElement.classList.add('loaded');
                    this.imageCache.set(src, img);
                };
                
                img.onerror = () => {
                    imgElement.classList.remove('loading');
                    imgElement.classList.add('loaded'); // 即使出错也标记为已加载
                };
                
                img.src = src;
            }
        }

        // 初始化图片加载器
        const imageLoader = new ImageLoader();

        // 分类切换功能
        function switchCategory(category) {
            // 隐藏所有分类
            document.querySelectorAll('.category').forEach(cat => {
                cat.classList.remove('active');
                cat.style.display = 'none'; // 确保隐藏所有分类
            });
            
            // 显示选中的分类
            const selectedCategory = document.getElementById(category + '-category');
            if (selectedCategory) {
                selectedCategory.style.display = 'block';
                selectedCategory.classList.add('active');
                
                // 确保分类内容完全显示
                setTimeout(() => {
                    // 获取gallery元素并确保其正确显示
                    const gallery = selectedCategory.querySelector('.gallery');
                    if (gallery) {
                        gallery.style.display = 'flex';
                        gallery.style.flexWrap = 'wrap';
                        gallery.style.justifyContent = 'center';
                    }
                }, 10);
            }
            
            // 更新按钮状态
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            const activeButton = document.querySelector(`.category-btn[data-category="${category}"]`);
            if (activeButton) {
                activeButton.classList.add('active');
            }
            
            // 触发懒加载
            setTimeout(() => {
                imageLoader.lazyLoadImages(category + '-category');
            }, 100);
        }

        // 为分类按钮添加点击事件
        document.querySelectorAll('.category-btn').forEach(button => {
            button.addEventListener('click', function() {
                const category = this.dataset.category;
                switchCategory(category);
            });
        });

        // 照片点击事件
        function attachPhotoClickEvents() {
            const photos = document.querySelectorAll('.gallery img');
            const photoDetails = document.getElementById('photo-details');
            const overlay = document.getElementById('overlay');
            const closeButton = document.getElementById('close-details');

            photos.forEach(photo => {
                photo.addEventListener('click', function () {
                    const title = this.dataset.title;
                    const content = this.dataset.content;
                    const camera = this.dataset.camera;
                    const lens = this.dataset.lens;
                    const location = this.dataset.location;
                    const imageSrc = this.dataset.src || this.src;

                    document.getElementById('photo-title').textContent = title;
                    document.getElementById('photo-content').textContent = content;
                    document.getElementById('photo-camera').textContent = camera;
                    document.getElementById('photo-lens').textContent = lens;
                    document.getElementById('photo-location').textContent = location;
                    document.getElementById('photo-image').src = imageSrc;

                    photoDetails.style.display = 'block';
                    overlay.style.display = 'block';
                    document.body.style.overflow = 'hidden'; // Prevent background scrolling
                });
            });

            closeButton.addEventListener('click', function () {
                photoDetails.style.display = 'none';
                overlay.style.display = 'none';
                document.body.style.overflow = 'auto'; // Enable scrolling
            });

            overlay.addEventListener('click', function () {
                photoDetails.style.display = 'none';
                overlay.style.display = 'none';
                document.body.style.overflow = 'auto'; // Enable scrolling
            });
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 预加载关键图片
            imageLoader.preloadCriticalImages();
            
            // 初始化懒加载（默认加载landscape分类）
            imageLoader.lazyLoadImages('landscape-category');
            
            // 绑定照片点击事件
            attachPhotoClickEvents();
            
            // 确保默认分类正确显示
            const defaultCategory = document.getElementById('landscape-category');
            if (defaultCategory) {
                defaultCategory.style.display = 'block';
                defaultCategory.classList.add('active');
            }
        });
        
        // 性能优化：防抖函数
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
        
        // 监听窗口大小变化，优化响应
        window.addEventListener('resize', debounce(() => {
            // 重新计算图片布局
            const activeCategory = document.querySelector('.category.active');
            if (activeCategory) {
                const gallery = activeCategory.querySelector('.gallery');
                if (gallery) {
                    // 强制重排
                    gallery.style.display = 'flex';
                    gallery.style.flexWrap = 'wrap';
                    gallery.style.justifyContent = 'center';
                }
            }
        }, 250));
    </script>
</body>

</html>